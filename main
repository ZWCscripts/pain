-- Mobil için modern şeffaf, Tux figürlü avatar değiştirme menüsü
-- Kaydedilmiş Roblox avatarlarını seçip otomatik giydirir ve resetler

-- Kendi Tux assetId'nizi kullanın!
local TUX_ASSET_ID = "rbxassetid://15432080" -- Örnek Tux PNG

local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer

-- Roblox avatarlarını çekmek için API (kendi hesapları için)
local function getUserOutfits()
    local userId = player.UserId
    local url = ("https://avatar.roblox.com/v1/users/%d/outfits?itemsPerPage=25"):format(userId)
    local suc, res = pcall(function()
        return HttpService:JSONDecode(game:HttpGet(url))
    end)
    if suc and res and res.data then
        return res.data
    else
        return {}
    end
end

-- Avatarı giydir (outfitId ile)
local function wearOutfit(outfitId)
    local url = ("https://avatar.roblox.com/v1/outfits/%d/wear"):format(outfitId)
    pcall(function()
        game:HttpPost(url, "", Enum.HttpContentType.ApplicationJson)
    end)
end

-- Reset fonksiyonu
local function resetCharacter()
    player:LoadCharacter()
end

-- Menü oluştur
local function createMenu()
    if game.CoreGui:FindFirstChild("MobileAvatarMenu") then
        game.CoreGui.MobileAvatarMenu:Destroy()
    end
    local gui = Instance.new("ScreenGui", game.CoreGui)
    gui.Name = "MobileAvatarMenu"
    gui.ResetOnSpawn = false
    gui.IgnoreGuiInset = true
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    -- Ana frame
    local frame = Instance.new("Frame", gui)
    frame.Name = "Main"
    frame.AnchorPoint = Vector2.new(0.5,0.5)
    frame.Position = UDim2.new(0.5,0,0.5,0)
    frame.Size = UDim2.new(0, 340, 0, 380)
    frame.BackgroundColor3 = Color3.fromRGB(34, 43, 62)
    frame.BackgroundTransparency = 0.17
    frame.BorderSizePixel = 0
    frame.Active = true
    frame.Draggable = true

    -- Modern şeffaflık ve blur efekti
    local blur = Instance.new("UIGradient", frame)
    blur.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(60, 60, 80)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(34,43,62))
    }
    blur.Transparency = NumberSequence.new{
        NumberSequenceKeypoint.new(0, 0.38),
        NumberSequenceKeypoint.new(1, 0.54)
    }

    -- Tux figürü
    local tux = Instance.new("ImageLabel", frame)
    tux.Image = TUX_ASSET_ID
    tux.Size = UDim2.new(1, 0, 1, 0)
    tux.Position = UDim2.new(0, 0, 0, 0)
    tux.BackgroundTransparency = 1
    tux.ImageTransparency = 0.85 -- Hafif silik/şeffaf

    -- Logo
    local logo = Instance.new("TextLabel", frame)
    logo.Text = "AvatarChanger"
    logo.Font = Enum.Font.GothamBold
    logo.TextColor3 = Color3.fromRGB(0, 170, 255)
    logo.TextSize = 26
    logo.AnchorPoint = Vector2.new(0.5, 0)
    logo.Size = UDim2.new(0.8,0,0,38)
    logo.Position = UDim2.new(0.5,0,0,10)
    logo.BackgroundTransparency = 1

    -- Kapat butonu
    local kapat = Instance.new("TextButton", frame)
    kapat.Text = "✕"
    kapat.Size = UDim2.new(0,36,0,36)
    kapat.Position = UDim2.new(1,-44,0,8)
    kapat.BackgroundTransparency = 0.75
    kapat.TextColor3 = Color3.fromRGB(255,80,80)
    kapat.Font = Enum.Font.GothamBold
    kapat.TextSize = 22
    kapat.BorderSizePixel = 0
    kapat.ZIndex = 5
    kapat.MouseButton1Click:Connect(function()
        gui:Destroy()
    end)

    -- Küçült butonu
    local kucult = Instance.new("TextButton", frame)
    kucult.Text = "—"
    kucult.Size = UDim2.new(0,36,0,36)
    kucult.Position = UDim2.new(1,-88,0,8)
    kucult.BackgroundTransparency = 0.75
    kucult.TextColor3 = Color3.fromRGB(0,170,255)
    kucult.Font = Enum.Font.GothamBold
    kucult.TextSize = 22
    kucult.BorderSizePixel = 0
    kucult.ZIndex = 5

    local min = false
    kucult.MouseButton1Click:Connect(function()
        min = not min
        for _,child in ipairs(frame:GetChildren()) do
            if not (child == kucult or child == kapat or child == logo) then
                child.Visible = not min
            end
        end
        if min then
            frame.Size = UDim2.new(0,120,0,54)
        else
            frame.Size = UDim2.new(0,340,0,380)
        end
    end)

    -- Scrollable avatar listesi
    local scroll = Instance.new("ScrollingFrame", frame)
    scroll.AnchorPoint = Vector2.new(0.5,0)
    scroll.Position = UDim2.new(0.5,0,0,60)
    scroll.Size = UDim2.new(0.9,0,0.7,0)
    scroll.CanvasSize = UDim2.new(0,0,0,0)
    scroll.BackgroundTransparency = 0.75
    scroll.BorderSizePixel = 0
    scroll.ScrollBarThickness = 6

    -- Mobil için optimize
    gui.Enabled = not UIS.KeyboardEnabled

    -- Outfits çek ve listele
    local outfits = getUserOutfits()
    local y = 0
    for _, outfit in ipairs(outfits) do
        local btn = Instance.new("TextButton", scroll)
        btn.Size = UDim2.new(1,0,0,42)
        btn.Position = UDim2.new(0,0,0,y)
        btn.BackgroundColor3 = Color3.fromRGB(30,45,67)
        btn.BackgroundTransparency = 0.24
        btn.Text = outfit.name
        btn.TextColor3 = Color3.fromRGB(0,170,255)
        btn.Font = Enum.Font.Gotham
        btn.TextSize = 20
        btn.BorderSizePixel = 0
        btn.AutoButtonColor = true

        btn.MouseButton1Click:Connect(function()
            wearOutfit(outfit.id)
            wait(0.7)
            resetCharacter()
        end)
        y = y + 46
    end
    scroll.CanvasSize = UDim2.new(0,0,0,y)
end

-- Menü açma fonksiyonu (istersen bir butondan da açabilirsin)
createMenu()
